<html lang="en">
  <head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function(){
         $('[data-toggle="popover"]').popover(); 
      });
    var gct;
    function show_Menu(){   
 
      
      $('#divName').show();
      $('#tableMenu tbody').empty();                                                   
      $.get("Servidor_cliente.php", function(datos){                                                                                                                                      
                    
       
               gct = JSON.parse(datos);  
               for(var i=0;i<gct["AllMenu"].length;i++){
                  
                //$("#sFile").append("<option value='"+fname+"\\"+gct[i]+"'>"+gct[i]+"</option>");                    
                  //var mm = gct[i];
                 // alert(gct["AllMenu"][i].precio);
                 $('#tableMenu > tbody:last-child').append(' '
                  +'<tr><td id="p'+gct["AllMenu"][i].id_platillo+'">'+gct["AllMenu"][i].nombre_platillo+'</td>'
                  +'<td>'
                  +'<select id="s'+gct["AllMenu"][i].id_platillo+'">'
                  + opcion(gct)    
                  +'</select>'
                  +'</td>'
                  +'<td>'+gct["AllMenu"][i].precio+'</td>'
                  +'<td>'
                  +'<button type="button" class="btn btn-info"  data-toggle="popover" data-trigger="hover"'
                  +'title="Elaboración" data-content="'+gct["AllMenu"][i].elaboracion+'">Info</button>'
                  +'&nbsp;'
                  +'<button onclick="comprar('+gct["AllMenu"][i].id_platillo+')" type="button" class="btn btn-warning">Comprar</button>'
                  +'</td></tr>');
               };
           });
         
                    
    }

    show_Menu();
    function opcion(g){
      var op='';
      for(var m=0;m<g["AllGuisados"].length;m++){
       op+= '<option id="'+g["AllGuisados"][m].id_guisado+'">'+g["AllGuisados"][m].nombre_guisado+'</option>'
      }
      return op;
    };
    var pedido =[];
    
    function comprar(id){
     
      var orden = new Array(id,$("#p"+id).text(),$("#s"+id).find('option:selected').val());
      pedido.push(orden);
      alert("Patillo añadido a pedido");
      $("#divPedidos").empty();
      for(var i=0;i<pedido.length;i++){
       
      $('<div class="p-2 border">'
        +'<button onclick="eliminarOrden('+i+')" type="button" class="btn btn-danger" >X</button>'
        +'&nbsp;&nbsp;'+pedido[i][1]+" de "+pedido[i][2]+' </div>').appendTo(("#divPedidos"));

      }      
    }
    function eliminarOrden(id){
      pedido.splice(id,1);
      $("#divPedidos").empty();
      for(var i=0;i<pedido.length;i++){
       
      $('<div class="p-2 border">'
        +'<button onclick="eliminarOrden('+i+')" type="button" class="btn btn-danger" >X</button>'
        +'&nbsp;&nbsp;'+pedido[i][1]+" de "+pedido[i][2]+' </div>').appendTo(("#divPedidos"));

      }      
    }



    

    //Agregar otra funcion que reconosca si es directorio o no
</script>


  </head>
  <body style="height:1500px">
    <!-- Barra de navegacion,Inicio-->
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
      <a class="navbar-brand" href="#">CAFETERÍA</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#collapsibleNavbar"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="nav navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="#Cliente">Cliente</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#Pedido">Pedido</a>
            </li>
          <li class="nav-item">
            <a class="nav-link" href="#Menu">Menú</a>
          </li>
          
        </ul>
        <div class="navbar-nav">
          
          <button
            type="button"
            class="btn btn-success"
            data-toggle="modal"
            data-target="#myModal">
            Enviar pedido
          </button>
        </div>
      </div>
    </nav>
    <!-- Barra de navegacion,Fin-->

    
    <div class="container-fluid" style="margin-top:0px">
      <div class="container">
        <!--Nombre validacion, Inicio-->
        <div id="Cliente">
          <br /><br /><br />
          <p class="bg-info text-white">&nbsp;&nbsp; Pon nombre del cliente</p>
          <h2>Cliente</h2>
          <form>
            <div
              action="/action_page.php"
              class="was-validated input-group mb-3" q>
              <div class="input-group-prepend">
                <span class="input-group-text">Nombre</span>
              </div>
              <input
                type="text"
                class="form-control"
                id="uname"
                placeholder="Enter username"
                name="uname"
                required
              />
              <div class="valid-feedback">Hola : )</div>
              <div class="invalid-feedback">
                Introduzca su nombre completo : (
              </div>
            </div>
          </form>
          <div id="divName" class="alert alert-danger alert-dismissible fade show" style="display:none" >
              <button type="button" class="close" data-dismiss="alert">&times;</button>
              <strong>No!</strong> Debes introducir un nombre.
            </div>
        </div>
        <!--Nombre validacion, Fin-->
       
        <!--Menu, Inicio-->
        <div id="Menu">
          <br /><br /><br />

          <p class="bg-info text-white">&nbsp;&nbsp; Pide tu comida</p>
          <h2>Menú</h2>
          <p>lista de alimentos:</p>
          <table class="table table-bordered" id="tableMenu">
            <thead class="thead-dark">
              <tr>
                <th>Nombre</th>
                <th>Guisado</th>
                <th>Precio</th>
                <th>Adquirir</th>
              </tr>
            </thead>
            <tbody>
            
            </tbody>
          </table>
        </div>

        <!--Menu, Fin-->
  <!--Pedido, Inicio-->
  <div id="Pedido">
      <br /><br /><br />
      <p class="bg-info text-white">&nbsp;&nbsp; Revisa tu engargo</p>
      <h2>Pedido</h2>
      <p>lista de alimentos:</p>
      <div id ="divPedidos" class="d-flex flex-column">
          <div class="p-2 border">&nbsp;&nbsp;Vacio</div>
                     
      </div>
    </div>
    <!--Pedido,Fin-->
       
      </div>
    </div>

    <!-- The Modal,Inicio -->
    <div class="modal fade" id="myModal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Esta seguro de su compra</h4>
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            Su pedido sera enviado.
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Confirmar
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- The Modal,Fin -->
  </body>
</html>
